<!-- SWIFT CHOW Order Tracking Progress Bar Component -->
<!-- This is a modular component that can be inserted into any page -->

<style>
    /* ==================== PROGRESS BAR STYLES ==================== */
    .swift-tracking-container {
        background: linear-gradient(135deg, var(--bg-primary) 0%, rgba(220, 38, 38, 0.02) 100%);
        border-radius: 1.5rem;
        padding: 2rem 1.5rem;
        margin: 2rem 0;
        position: relative;
        border: 1px solid var(--border-color);
        backdrop-filter: blur(10px);
    }

    @media (min-width: 768px) {
        .swift-tracking-container {
            padding: 3rem 2rem;
        }
    }

    /* Progress Bar Track */
    .tracking-progress-track {
        position: absolute;
        top: 4rem;
        left: 2.5rem;
        right: 2.5rem;
        height: 3px;
        background: var(--border-color);
        border-radius: 10px;
        z-index: 1;
        overflow: hidden;
    }

    @media (min-width: 768px) {
        .tracking-progress-track {
            top: 3.5rem;
            left: 4rem;
            right: 4rem;
        }
    }

    /* Progress Bar Fill */
    .tracking-progress-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--primary) 0%, #ef4444 100%);
        border-radius: 10px;
        width: 0%;
        transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow: 0 0 20px rgba(220, 38, 38, 0.5);
    }

    /* Steps Container */
    .tracking-steps {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        position: relative;
        z-index: 2;
    }

    /* Individual Step */
    .tracking-step {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex: 1;
        opacity: 0.6;
        transition: opacity 0.4s ease;
    }

    .tracking-step.active {
        opacity: 1;
    }

    .tracking-step.completed {
        opacity: 1;
    }

    /* Step Circle */
    .tracking-step-circle {
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
        font-size: 1.2rem;
        position: relative;
        z-index: 3;
        border: 3px solid var(--border-color);
        background: var(--card-bg);
        color: var(--text-secondary);
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    @media (min-width: 768px) {
        .tracking-step-circle {
            width: 3rem;
            height: 3rem;
            font-size: 1.4rem;
        }
    }

    /* Completed Step Circle */
    .tracking-step.completed .tracking-step-circle {
        background: linear-gradient(135deg, var(--primary) 0%, #991b1b 100%);
        border-color: var(--primary);
        color: white;
        box-shadow: 0 8px 25px rgba(220, 38, 38, 0.4);
        transform: scale(1);
    }

    /* Active Step Circle - Pulse Animation */
    .tracking-step.active .tracking-step-circle {
        background: white;
        border-color: var(--primary);
        color: var(--primary);
        box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.2), 0 8px 25px rgba(220, 38, 38, 0.3);
        animation: tracking-pulse 2s ease-in-out infinite;
    }

    @keyframes tracking-pulse {
        0%, 100% {
            box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.2), 0 8px 25px rgba(220, 38, 38, 0.3);
            transform: scale(1);
        }
        50% {
            box-shadow: 0 0 0 8px rgba(220, 38, 38, 0.1), 0 8px 25px rgba(220, 38, 38, 0.4);
            transform: scale(1.05);
        }
    }

    /* Checkmark Animation */
    .tracking-checkmark {
        opacity: 0;
        transform: scale(0);
        animation: tracking-checkmark-pop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }

    @keyframes tracking-checkmark-pop {
        0% {
            opacity: 0;
            transform: scale(0) rotate(-180deg);
        }
        70% {
            transform: scale(1.2) rotate(10deg);
        }
        100% {
            opacity: 1;
            transform: scale(1) rotate(0);
        }
    }

    /* Step Label */
    .tracking-step-label {
        text-align: center;
        width: 100%;
    }

    .tracking-step-title {
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--text-secondary);
        transition: color 0.4s ease;
        line-height: 1.3;
        margin-bottom: 0.3rem;
    }

    @media (min-width: 768px) {
        .tracking-step-title {
            font-size: 0.95rem;
        }
    }

    .tracking-step.active .tracking-step-title,
    .tracking-step.completed .tracking-step-title {
        color: var(--primary);
        font-weight: 700;
    }

    .tracking-step-time {
        font-size: 0.75rem;
        color: var(--text-secondary);
        opacity: 0.7;
        transition: all 0.4s ease;
    }

    @media (min-width: 768px) {
        .tracking-step-time {
            font-size: 0.8rem;
        }
    }

    .tracking-step.active .tracking-step-time,
    .tracking-step.completed .tracking-step-time {
        opacity: 1;
        color: var(--primary);
    }

    /* Status Badge */
    .tracking-status-badge {
        display: inline-block;
        background: rgba(220, 38, 38, 0.1);
        color: var(--primary);
        padding: 0.5rem 1rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
        margin-top: 1.5rem;
        border: 1px solid rgba(220, 38, 38, 0.2);
        transition: all 0.4s ease;
    }

    @media (min-width: 768px) {
        .tracking-status-badge {
            font-size: 0.85rem;
        }
    }

    .tracking-status-badge.active {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
        animation: tracking-badge-pulse 2s ease-in-out infinite;
    }

    @keyframes tracking-badge-pulse {
        0%, 100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.4); }
        50% { box-shadow: 0 0 0 8px rgba(220, 38, 38, 0); }
    }

    .tracking-status-badge.completed {
        background: rgba(16, 185, 129, 0.1);
        color: #10b981;
        border-color: rgba(16, 185, 129, 0.3);
    }

    /* Spinner for current step */
    .tracking-spinner {
        display: inline-block;
        width: 1.2rem;
        height: 1.2rem;
        border: 2px solid rgba(220, 38, 38, 0.3);
        border-top-color: var(--primary);
        border-radius: 50%;
        animation: tracking-spin 1s linear infinite;
    }

    @keyframes tracking-spin {
        to { transform: rotate(360deg); }
    }

    /* Helper text */
    .tracking-helper-text {
        font-size: 0.8rem;
        color: var(--text-secondary);
        margin-top: 2rem;
        text-align: center;
        opacity: 0.7;
    }

    /* Responsive adjustment */
    @media (max-width: 640px) {
        .tracking-step-title {
            max-width: 80px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
    }
</style>

<!-- HTML Structure -->
<div class="swift-tracking-container">
    <!-- Progress Track -->
    <div class="tracking-progress-track">
        <div class="tracking-progress-fill" id="trackingProgressFill"></div>
    </div>

    <!-- Steps -->
    <div class="tracking-steps" id="trackingSteps">
        <!-- Step 1: Order Confirmed -->
        <div class="tracking-step" data-step="1">
            <div class="tracking-step-circle">
                <i class="fas fa-check" style="opacity: 0;"></i>
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="tracking-step-label">
                <div class="tracking-step-title">Order Confirmed</div>
                <div class="tracking-step-time" data-time="--:--">--:--</div>
                <div class="tracking-status-badge">Confirmed</div>
            </div>
        </div>

        <!-- Step 2: Being Prepared -->
        <div class="tracking-step" data-step="2">
            <div class="tracking-step-circle">
                <i class="fas fa-check" style="opacity: 0;"></i>
                <i class="fas fa-fire"></i>
            </div>
            <div class="tracking-step-label">
                <div class="tracking-step-title">Being Prepared</div>
                <div class="tracking-step-time" data-time="--:--">--:--</div>
                <div class="tracking-status-badge">Preparing</div>
            </div>
        </div>

        <!-- Step 3: Out for Delivery -->
        <div class="tracking-step" data-step="3">
            <div class="tracking-step-circle">
                <i class="fas fa-check" style="opacity: 0;"></i>
                <i class="fas fa-bike"></i>
            </div>
            <div class="tracking-step-label">
                <div class="tracking-step-title">Out for Delivery</div>
                <div class="tracking-step-time" data-time="--:--">--:--</div>
                <div class="tracking-status-badge">En Route</div>
            </div>
        </div>

        <!-- Step 4: Delivered -->
        <div class="tracking-step" data-step="4">
            <div class="tracking-step-circle">
                <i class="fas fa-check" style="opacity: 0;"></i>
                <i class="fas fa-home"></i>
            </div>
            <div class="tracking-step-label">
                <div class="tracking-step-title">Delivered</div>
                <div class="tracking-step-time" data-time="--:--">--:--</div>
                <div class="tracking-status-badge">Delivered</div>
            </div>
        </div>
    </div>

    <div class="tracking-helper-text">
        <span id="trackingCurrentStatus">Order confirmed! Your food is being prepared.</span>
    </div>
</div>

<!-- JavaScript -->
<script>
    // ==================== ORDER TRACKING SYSTEM ====================
    
    class OrderTracker {
        constructor() {
            this.currentStep = 1;
            this.totalSteps = 4;
            this.steps = document.querySelectorAll('.tracking-step');
            this.progressFill = document.getElementById('trackingProgressFill');
            this.statusText = document.getElementById('trackingCurrentStatus');
            
            // Step information
            this.stepInfo = [
                {
                    title: "Order Confirmed",
                    messages: [
                        "Order confirmed! Your food is being prepared.",
                        "We've received your order and sent it to the kitchen."
                    ]
                },
                {
                    title: "Being Prepared",
                    messages: [
                        "Your food is being prepared with care.",
                        "Our chefs are preparing your delicious order."
                    ]
                },
                {
                    title: "Out for Delivery",
                    messages: [
                        "Your order is out for delivery!",
                        "Your driver is on the way with your order."
                    ]
                },
                {
                    title: "Delivered",
                    messages: [
                        "Your order has been delivered!",
                        "Thank you for ordering with SWIFT CHOW!"
                    ]
                }
            ];
            
            this.init();
        }

        init() {
            this.updateUI();
        }

        setStep(step) {
            if (step >= 1 && step <= this.totalSteps) {
                this.currentStep = step;
                this.updateUI();
            }
        }

        nextStep() {
            if (this.currentStep < this.totalSteps) {
                this.currentStep++;
                this.updateUI();
            }
        }

        updateUI() {
            // Calculate progress percentage
            const progress = ((this.currentStep - 1) / (this.totalSteps - 1)) * 100;
            this.progressFill.style.width = `${progress}%`;

            // Update each step
            this.steps.forEach((stepElement, index) => {
                const stepNum = parseInt(stepElement.dataset.step);
                const circle = stepElement.querySelector('.tracking-step-circle');
                const timeEl = stepElement.querySelector('.tracking-step-time');
                const badge = stepElement.querySelector('.tracking-status-badge');
                const checkIcon = stepElement.querySelector('.fa-check');
                const otherIcon = circle.querySelector('i:not(.fa-check)');

                // Reset classes
                stepElement.classList.remove('active', 'completed');

                if (stepNum < this.currentStep) {
                    // Completed step
                    stepElement.classList.add('completed');
                    
                    // Show checkmark
                    if (checkIcon && checkIcon.style.opacity !== '1') {
                        checkIcon.style.opacity = '1';
                        checkIcon.classList.add('tracking-checkmark');
                        otherIcon.style.display = 'none';
                    }
                    
                    // Update time
                    const completedTime = this.generateTime(stepNum);
                    timeEl.textContent = completedTime;
                    timeEl.dataset.time = completedTime;
                    
                    // Update badge
                    badge.classList.remove('active');
                    badge.classList.add('completed');
                    badge.textContent = 'âœ“ Completed';
                } 
                else if (stepNum === this.currentStep) {
                    // Active step
                    stepElement.classList.add('active');
                    
                    // Show spinner/icon
                    if (checkIcon) checkIcon.style.opacity = '0';
                    otherIcon.style.display = 'inline-block';
                    
                    // Update time
                    timeEl.textContent = 'In Progress';
                    
                    // Update badge
                    badge.classList.remove('completed');
                    badge.classList.add('active');
                } 
                else {
                    // Future step
                    if (checkIcon) checkIcon.style.opacity = '0';
                    otherIcon.style.display = 'inline-block';
                    timeEl.textContent = '--:--';
                    badge.classList.remove('active', 'completed');
                }
            });

            // Update status message
            this.updateStatusMessage();
        }

        generateTime(step) {
            const baseTime = new Date('2026-02-09T12:10:00');
            const offsets = [0, 5, 25, 40]; // minutes
            const time = new Date(baseTime.getTime() + offsets[step - 1] * 60000);
            return time.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        }

        updateStatusMessage() {
            const messages = this.stepInfo[this.currentStep - 1].messages;
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            this.statusText.textContent = randomMessage;
        }
    }

    // Initialize the tracker
    const tracker = new OrderTracker();

    // Expose methods globally for external use
    window.updateOrderStep = (step) => tracker.setStep(step);
    window.advanceOrderStep = () => tracker.nextStep();

    // Demo: Auto-advance every 4 seconds (optional)
    // Uncomment to enable auto-play
    /*
    let autoPlayInterval = setInterval(() => {
        if (tracker.currentStep < tracker.totalSteps) {
            tracker.nextStep();
        } else {
            clearInterval(autoPlayInterval);
        }
    }, 4000);
    */
</script>

<!-- USAGE INSTRUCTIONS:
    
    1. EMBED IN TRACKING PAGE:
       Simply copy this entire component and paste it into your tracking.html 
       between any existing content (it won't interfere).

    2. UPDATE ORDER STATUS FROM JAVASCRIPT:
       - Update to specific step: updateOrderStep(3)
       - Advance to next step: advanceOrderStep()
       
    3. EXAMPLE INTEGRATION:
       <script>
           // When receiving server updates:
           fetch('/api/order-status')
               .then(res => res.json())
               .then(data => updateOrderStep(data.currentStep));
       </script>

    4. CUSTOMIZATION:
       - Change colors: Modify --primary color variable in CSS
       - Change icons: Edit the fa-* classes in HTML
       - Change step titles: Edit the .tracking-step-title text
       - Auto-play demo: Uncomment the setInterval at bottom of script
-->



